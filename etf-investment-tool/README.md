# ETF投资目标价格分析工具

基于多维度技术指标（MA20 + MA60 + 月K低点）计算ETF目标买入价格，辅助定投决策。

## 功能特点

- **多维度目标价计算**：综合短期(MA20)、中期(MA60)、长期(月K低点)三个维度
- **智能买入建议**：根据RSI、均线位置、月涨跌幅综合判断
- **4只ETF覆盖**：纳指100、标普500、沪深300、科创50

## 安装

```bash
cd ~/Documents/tayceyun.github.io/etf-investment-tool
pip install -r requirements.txt
```

## 使用

```bash
python etf_analyzer.py
```

## 输出示例

```
╭─────────────────────────────────────────────────────────────────────────────╮
│               ETF投资目标价格分析 (多维度版)                                   │
│               分析时间: 2024-01-15 09:30:00                                  │
╰─────────────────────────────────────────────────────────────────────────────╯

╭──────────┬────────┬────────┬────────┬────────┬──────┬────────┬────────┬────────┬───────────────╮
│ ETF      │ 现价   │ MA20   │ MA60   │ 月K低  │ RSI  │ 月涨跌 │ 目标价 │ 单次金额│ 建议          │
├──────────┼────────┼────────┼────────┼────────┼──────┼────────┼────────┼────────┼───────────────┤
│ 纳指100  │ 2.150  │ 2.200  │ 2.180  │ 2.050  │ 45   │ -2.5%  │ 2.100  │ ¥1000  │ 正常买入      │
│ 标普500  │ 1.580  │ 1.550  │ 1.520  │ 1.480  │ 52   │ +1.2%  │ 1.450  │ ¥500   │ 暂缓买入      │
│ 沪深300  │ 3.850  │ 3.900  │ 4.000  │ 3.700  │ 38   │ -3.8%  │ 3.750  │ ¥500   │ 减半买入      │
│ 科创50   │ 0.920  │ 1.050  │ 1.100  │ 0.900  │ 28   │ -12.5% │ 0.980  │ ¥500   │ 强烈买入[可加仓]│
╰──────────┴────────┴────────┴────────┴────────┴──────┴────────┴────────┴────────┴───────────────╯
```

## 算法说明

### 目标价格计算

```
目标价 = 基准价 × (1 - 折扣率)

基准价 = MA20 × 40% + MA60 × 40% + 月K低点 × 20%
```

### 折扣率确定

| RSI范围 | 基础折扣 | 说明 |
|---------|----------|------|
| RSI < 30 | 2% | 超卖区域 |
| RSI < 50 | 4% | 偏弱区域 |
| RSI ≥ 50 | 6% | 正常或偏强 |

### 信号加成

每满足以下条件之一，折扣率减少1%（更容易触发买入）：
- 现价 < MA20（短期低估）
- 现价 < MA60（中期低估）
- 现价接近月K低点±5%（接近底部）

### 溢价率调整（差异化阈值）

| ETF类型 | 阈值 | 说明 |
|---------|------|------|
| 美股QDII（纳指、标普） | 4% | QDII额度限制，常年有溢价 |
| A股ETF（沪深300、科创50） | 0% | 套利机制完善，溢价应接近0 |

**溢价率对折扣的影响**：
```
溢价调整 = (实际溢价率 - 阈值) × 0.5%
```
- 溢价超过阈值 → 增加折扣要求（提高买入门槛）
- 折价 → 减少折扣要求（降低买入门槛）

**溢价状态**：
| 状态 | 条件 | 建议调整 |
|------|------|----------|
| 🟢 折价 | 溢价率 < 0% | 建议升级一档 |
| ⚪ 正常 | 溢价率 ≤ 阈值 | 不调整 |
| 🟡 偏高 | 溢价率 > 阈值+2% | 警告 |
| 🔴 过高 | 溢价率 > 阈值+4% | 建议降级一档 |

### 买入建议

| 条件 | 建议 |
|------|------|
| 现价 ≤ 目标价 且 信号≥2 | 强烈买入 |
| 现价 ≤ 目标价 | 正常买入 |
| 现价 ≤ 目标价×1.05 | 减半买入 |
| 现价 > 目标价×1.05 | 暂缓买入 |
| 月跌幅 > 10% | 追加"可加仓"标记 |

## 定投计划

| ETF | 频率 | 单次金额 | 月投总额 |
|-----|------|----------|----------|
| 纳指100ETF | 每月2次 | ¥1000 | ¥2000 |
| 标普500ETF | 每月2次 | ¥500 | ¥1000 |
| 沪深300ETF | 每月2次 | ¥500 | ¥1000 |
| 科创50ETF | 每月2次 | ¥500 | ¥1000 |
| **合计** | **每月8次** | - | **¥5000** |

## 注意事项

1. 本工具仅供参考，不构成投资建议
2. 投资有风险，入市需谨慎
3. 数据来源于akshare，可能存在延迟

