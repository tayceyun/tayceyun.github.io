"use strict";(globalThis.webpackChunktayceyun_library=globalThis.webpackChunktayceyun_library||[]).push([[8064],{28453:(n,e,s)=>{s.d(e,{R:()=>i,x:()=>c});var t=s(96540);const r={},o=t.createContext(r);function i(n){const e=t.useContext(o);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:i(n.components),t.createElement(o.Provider,{value:e},n.children)}},62250:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>a,contentTitle:()=>c,default:()=>l,frontMatter:()=>i,metadata:()=>t,toc:()=>u});const t=JSON.parse('{"id":"others/axios","title":"axios","description":"\u5c01\u88c5 axios","source":"@site/docs/others/axios.md","sourceDirName":"others","slug":"/others/axios","permalink":"/blog/others/axios","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"mainSidebar","previous":{"title":"leak","permalink":"/blog/others/leak"},"next":{"title":"vben-admin","permalink":"/blog/others/vben-admin"}}');var r=s(74848),o=s(28453);const i={},c=void 0,a={},u=[{value:"\u5c01\u88c5 axios",id:"\u5c01\u88c5-axios",level:2}];function p(n){const e={code:"code",h2:"h2",pre:"pre",...(0,o.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h2,{id:"\u5c01\u88c5-axios",children:"\u5c01\u88c5 axios"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-typescript",children:"import axios from 'axios';\nimport type `{ AxiosInstance, AxiosRequestConfig, AxiosResponse }` from 'axios';\n\ninterface IAxiosRequestConfig extends AxiosRequestConfig {\n  interceptors?: {\n    requestSuccessFn?: (config: AxiosRequestConfig) => AxiosRequestConfig;\n    requestFailFn?: (err: any) => any;\n    responseSuccessFn?: (res: AxiosResponse) => AxiosResponse;\n    responseFailFn?: (err: any) => any;\n  };\n}\n\n// ts\u5c01\u88c5axios\nclass AxiosRequest {\n  instance: AxiosInstance;\n  constructor(config: IAxiosRequestConfig) {\n    this.instance = axios.create(config);\n    // \u53ef\u4ee5\u7edf\u4e00\u6dfb\u52a0\u62e6\u622a\u5668,\u4e5f\u53ef\u4ee5\u901a\u8fc7\u5bf9\u4e0d\u540c\u7684\u5b9e\u4f8b\u662f\u5426\u4f20\u5165\u62e6\u622a\u5668\u6765\u51b3\u5b9a\u662f\u5426\u8fdb\u884c\u7cbe\u7ec6\u5316\u62e6\u622a\n    this.instance.interceptors.request.use(\n      (config) => {\n        // \u7edf\u4e00\u8bbe\u7f6etoken\n        return config;\n      },\n      (err) => {\n        // \u8bf7\u6c42\u5931\u8d25\u62e6\u622a\n        return err;\n      }\n    );\n    this.instance.interceptors.response.use(\n      (res) => {\n        // \u5168\u5c40\u54cd\u5e94\u6210\u529f\u62e6\u622a\n        return res;\n      },\n      (err) => {\n        // \u54cd\u5e94\u5931\u8d25\u62e6\u622a\n        return err;\n      }\n    );\n\n    this.instance.interceptors.request.use(\n      config.interceptors?.requestSuccessFn,\n      config.interceptors?.requestFailFn\n    );\n    this.instance.interceptors.response.use(\n      config.interceptors?.responseSuccessFn,\n      config.interceptors?.responseFailFn\n    );\n  }\n\n  // \u5c01\u88c5\u7f51\u7edc\u8bf7\u6c42\u65b9\u6cd5\n  request(config: IAxiosRequestConfig) {\n    //  \u5bf9\u7b2c\u4e09\u65b9\u5e93\u8fdb\u884c\u4e8c\u6b21\u5c01\u88c5\n    // (\u5e94\u5bf9\u5e93\u4e0d\u7ef4\u62a4\u65f6, \u9700\u8981\u66f4\u6362\u5e93\u7684\u60c5\u51b5, \u901a\u8fc7\u4e8c\u6b21\u5c01\u88c5\u53ef\u4ee5\u7edf\u4e00\u66f4\u6362\u5e93)\n    this.instance.request(config);\n  }\n  get() `{}`\n}\n\n// \u521b\u5efa\u5b9e\u4f8b\n// \u5bf9\u4e8e\u4e0d\u540c\u7684\u5b9e\u4f8b\u901a\u8fc7\u662f\u5426\u4f20\u5165\u62e6\u622a\u5668,\u6765\u8fdb\u884c\u5206\u522b\u5904\u7406\nconst sitRequest = new AxiosRequest(`{ url: '', timeout: 1000 }`);\nconst uatRequest = new AxiosRequest({\n  url: '',\n  timeout: 1000,\n  interceptors: {\n    requestSuccessFn: (config: AxiosRequestConfig) => {\n      return config;\n    },\n    requestFailFn: (err: any) => {\n      return err;\n    },\n    responseSuccessFn: (res: AxiosResponse) => {\n      return res;\n    },\n    responseFailFn: (err: any) => {\n      return err;\n    }\n  }\n});\n"})})]})}function l(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(p,{...n})}):p(n)}}}]);